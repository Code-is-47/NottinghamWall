{"remainingRequest":"D:\\NottinghamWall\\admin\\node_modules\\babel-loader\\lib\\index.js!D:\\NottinghamWall\\admin\\node_modules\\ts-loader\\index.js??ref--14-2!D:\\NottinghamWall\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\NottinghamWall\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\NottinghamWall\\admin\\src\\views\\Admin\\addAdmin.vue?vue&type=script&lang=ts&","dependencies":[{"path":"D:\\NottinghamWall\\admin\\src\\views\\Admin\\addAdmin.vue","mtime":1719245360382},{"path":"D:\\NottinghamWall\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\NottinghamWall\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\NottinghamWall\\admin\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"D:\\NottinghamWall\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\NottinghamWall\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _admin = require(\"@/api/admin\");\n\nvar _default = {\n  data: function data() {\n    return {\n      ruleForm: {\n        name: '',\n        username: '',\n        sex: '1',\n        phone: '',\n        idNumber: ''\n      },\n      rules: {\n        name: [{\n          required: true,\n          message: '请输入管理员姓名',\n          trigger: 'blur'\n        }],\n        username: [{\n          required: true,\n          message: '请输入编号',\n          trigger: 'blur'\n        }],\n        phone: [{\n          required: true,\n          trigger: 'blur',\n          validator: function validator(rule, value, callback) {\n            if (!value) {\n              return callback(new Error('请输入手机号'));\n            }\n\n            if (value === \"\" || !/^1[3456789]\\d{9}$/.test(value)) {\n              return callback(new Error('请输入正确的手机号'));\n            }\n\n            callback();\n          }\n        }],\n        idNumber: [{\n          required: true,\n          trigger: 'blur',\n          validator: function validator(rule, value, callback) {\n            if (!value) {\n              return callback(new Error('请输入身份证号'));\n            }\n\n            if (value === \"\" || !/(^\\d{15}$)|(^\\d{18}$)|(^\\d{17}(\\d|X|x)$)/.test(value)) {\n              return callback(new Error('请输入正确的身份证号'));\n            }\n\n            callback();\n          }\n        }]\n      }\n    };\n  },\n  // 修改时回显管理员信息\n  created: function created() {\n    var _this = this;\n\n    this.optType = this.$route.query.id ? 'update' : 'add';\n\n    if (this.optType === 'update') {\n      //alert(this.$route.query.id)\n      (0, _admin.getAdminById)(this.$route.query.id).then(function (res) {\n        if (res.data.code === 1) {\n          _this.ruleForm = res.data.data;\n        }\n      });\n    }\n  },\n  methods: {\n    // 重置表单\n    resetForm: function resetForm() {\n      this.ruleForm = {\n        name: '',\n        username: '',\n        sex: '1',\n        phone: '',\n        idNumber: ''\n      };\n    },\n    // 提交表单\n    submitForm: function submitForm(formName) {\n      var _this2 = this;\n\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          if (_this2.optType === 'add') {\n            // 添加管理员\n            (0, _admin.addAdmin)(_this2.ruleForm).then(function (res) {\n              if (res.data.code === 1) {\n                _this2.$message.success('添加成功');\n\n                _this2.$router.push('/admin');\n              } else {\n                _this2.$message.error('添加失败');\n              }\n            });\n          }\n        } else {\n          // 修改管理员\n          (0, _admin.updateAdmin)(_this2.ruleForm).then(function (res) {\n            if (res.data.code === 1) {\n              _this2.$message.success('修改成功');\n\n              _this2.$router.push('/admin');\n            } else {\n              _this2.$message.error('修改失败');\n            }\n          });\n        }\n      });\n    }\n  }\n};\nexports.default = _default;",{"version":3,"sources":["D:\\NottinghamWall\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\NottinghamWall\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\NottinghamWall\\admin\\src\\views\\Admin\\addAdmin.vue?vue&type=script&lang=ts&"],"names":[],"mappings":";;;;;;;AA+BA;;eACe;AACb,EAAA,IADa,kBACT;AACF,WAAO;AACL,MAAA,QAAQ,EAAE;AACR,QAAA,IAAI,EAAE,EADE;AAER,QAAA,QAAQ,EAAE,EAFF;AAGR,QAAA,GAAG,EAAE,GAHG;AAIR,QAAA,KAAK,EAAE,EAJC;AAKR,QAAA,QAAQ,EAAE;AALF,OADL;AAQL,MAAA,KAAK,EAAC;AACJ,QAAA,IAAI,EAAE,CACJ;AAAE,UAAA,QAAQ,EAAE,IAAZ;AAAkB,UAAA,OAAO,EAAE,UAA3B;AAAuC,UAAA,OAAO,EAAE;AAAhD,SADI,CADF;AAIJ,QAAA,QAAQ,EAAE,CACR;AAAE,UAAA,QAAQ,EAAE,IAAZ;AAAkB,UAAA,OAAO,EAAE,OAA3B;AAAoC,UAAA,OAAO,EAAE;AAA7C,SADQ,CAJN;AAOJ,QAAA,KAAK,EAAE,CACL;AAAE,UAAA,QAAQ,EAAE,IAAZ;AAAkB,UAAA,OAAO,EAAE,MAA3B;AAAmC,UAAA,SAAS,EAAE,mBAAC,IAAD,EAAM,KAAN,EAAY,QAAZ,EAAwB;AACpE,gBAAI,CAAC,KAAL,EAAY;AACV,qBAAO,QAAQ,CAAC,IAAI,KAAJ,CAAU,QAAV,CAAD,CAAf;AACD;;AACD,gBAAI,KAAK,KAAK,EAAV,IAAgB,CAAC,oBAAoB,IAApB,CAAyB,KAAzB,CAArB,EAAsD;AACpD,qBAAO,QAAQ,CAAC,IAAI,KAAJ,CAAU,WAAV,CAAD,CAAf;AACD;;AACD,YAAA,QAAQ;AACT;AARD,SADK,CAPH;AAkBJ,QAAA,QAAQ,EAAE,CACR;AAAE,UAAA,QAAQ,EAAE,IAAZ;AAAkB,UAAA,OAAO,EAAE,MAA3B;AAAmC,UAAA,SAAS,EAAE,mBAAC,IAAD,EAAM,KAAN,EAAY,QAAZ,EAAwB;AACpE,gBAAI,CAAC,KAAL,EAAY;AACV,qBAAO,QAAQ,CAAC,IAAI,KAAJ,CAAU,SAAV,CAAD,CAAf;AACD;;AACD,gBAAI,KAAK,KAAK,EAAV,IAAgB,CAAC,2CAA2C,IAA3C,CAAgD,KAAhD,CAArB,EAA6E;AAC3E,qBAAO,QAAQ,CAAC,IAAI,KAAJ,CAAU,YAAV,CAAD,CAAf;AACD;;AACD,YAAA,QAAQ;AACT;AARD,SADQ;AAlBN;AARD,KAAP;AAuCD,GAzCY;AA0Cb;AACA,EAAA,OA3Ca,qBA2CN;AAAA;;AACL,SAAK,OAAL,GAAe,KAAK,MAAL,CAAY,KAAZ,CAAkB,EAAlB,GAAuB,QAAvB,GAAkC,KAAjD;;AACA,QAAI,KAAK,OAAL,KAAiB,QAArB,EAA+B;AAC7B;AACA,+BAAa,KAAK,MAAL,CAAY,KAAZ,CAAkB,EAA/B,EAAmC,IAAnC,CAAwC,UAAA,GAAG,EAAG;AAC5C,YAAG,GAAG,CAAC,IAAJ,CAAS,IAAT,KAAkB,CAArB,EAAuB;AACrB,UAAA,KAAI,CAAC,QAAL,GAAgB,GAAG,CAAC,IAAJ,CAAS,IAAzB;AACD;AACF,OAJD;AAKD;AACF,GArDY;AAsDb,EAAA,OAAO,EAAE;AACP;AACA,IAAA,SAFO,uBAEE;AACP,WAAK,QAAL,GAAe;AACb,QAAA,IAAI,EAAE,EADO;AAEb,QAAA,QAAQ,EAAE,EAFG;AAGb,QAAA,GAAG,EAAE,GAHQ;AAIb,QAAA,KAAK,EAAE,EAJM;AAKb,QAAA,QAAQ,EAAE;AALG,OAAf;AAOD,KAVM;AAWP;AACA,IAAA,UAZO,sBAYI,QAZJ,EAYY;AAAA;;AACjB,WAAK,KAAL,CAAW,QAAX,EAAqB,QAArB,CAA8B,UAAC,KAAD,EAAU;AACtC,YAAI,KAAJ,EAAW;AACT,cAAG,MAAI,CAAC,OAAL,KAAiB,KAApB,EAA0B;AACxB;AACA,iCAAS,MAAI,CAAC,QAAd,EAAwB,IAAxB,CAA6B,UAAA,GAAG,EAAG;AACjC,kBAAG,GAAG,CAAC,IAAJ,CAAS,IAAT,KAAkB,CAArB,EAAuB;AACrB,gBAAA,MAAI,CAAC,QAAL,CAAc,OAAd,CAAsB,MAAtB;;AACA,gBAAA,MAAI,CAAC,OAAL,CAAa,IAAb,CAAkB,QAAlB;AACD,eAHD,MAGK;AACH,gBAAA,MAAI,CAAC,QAAL,CAAc,KAAd,CAAoB,MAApB;AACD;AACF,aAPD;AAQC;AACF,SAZH,MAYO;AACH;AACA,kCAAY,MAAI,CAAC,QAAjB,EAA2B,IAA3B,CAAgC,UAAA,GAAG,EAAG;AACpC,gBAAG,GAAG,CAAC,IAAJ,CAAS,IAAT,KAAkB,CAArB,EAAuB;AACrB,cAAA,MAAI,CAAC,QAAL,CAAc,OAAd,CAAsB,MAAtB;;AACA,cAAA,MAAI,CAAC,OAAL,CAAa,IAAb,CAAkB,QAAlB;AACD,aAHD,MAGK;AACH,cAAA,MAAI,CAAC,QAAL,CAAc,KAAd,CAAoB,MAApB;AACD;AACF,WAPD;AAQD;AACF,OAxBH;AAyBC;AAtCI;AAtDI,C","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport {addAdmin, getAdminById, updateAdmin} from '@/api/admin'\r\nexport default {\r\n  data() {\r\n    return {\r\n      ruleForm: {\r\n        name: '',\r\n        username: '',\r\n        sex: '1',\r\n        phone: '',\r\n        idNumber: '',\r\n      },\r\n      rules:{\r\n        name: [\r\n          { required: true, message: '请输入管理员姓名', trigger: 'blur' }\r\n        ],\r\n        username: [\r\n          { required: true, message: '请输入编号', trigger: 'blur' }\r\n        ],\r\n        phone: [\r\n          { required: true, trigger: 'blur', validator: (rule,value,callback) => {\r\n            if (!value) {\r\n              return callback(new Error('请输入手机号'));\r\n            }\r\n            if (value === \"\" || !/^1[3456789]\\d{9}$/.test(value)) {\r\n              return callback(new Error('请输入正确的手机号'));\r\n            }\r\n            callback();\r\n          }}\r\n        ],\r\n        idNumber: [\r\n          { required: true, trigger: 'blur', validator: (rule,value,callback) => {\r\n            if (!value) {\r\n              return callback(new Error('请输入身份证号'));\r\n            }\r\n            if (value === \"\" || !/(^\\d{15}$)|(^\\d{18}$)|(^\\d{17}(\\d|X|x)$)/.test(value)) {\r\n              return callback(new Error('请输入正确的身份证号'));\r\n            }\r\n            callback();\r\n          }}\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  // 修改时回显管理员信息\r\n  created(){\r\n    this.optType = this.$route.query.id ? 'update' : 'add'\r\n    if (this.optType === 'update') {\r\n      //alert(this.$route.query.id)\r\n      getAdminById(this.$route.query.id).then(res => {\r\n        if(res.data.code === 1){\r\n          this.ruleForm = res.data.data\r\n        }\r\n      })\r\n    }\r\n  },\r\n  methods: {\r\n    // 重置表单\r\n    resetForm() {\r\n      this.ruleForm ={\r\n        name: '',\r\n        username: '',\r\n        sex: '1',\r\n        phone: '',\r\n        idNumber: '',\r\n      }\r\n    },\r\n    // 提交表单\r\n    submitForm(formName) {\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          if(this.optType === 'add'){\r\n            // 添加管理员\r\n            addAdmin(this.ruleForm).then(res => {\r\n              if(res.data.code === 1){\r\n                this.$message.success('添加成功')\r\n                this.$router.push('/admin')\r\n              }else{\r\n                this.$message.error('添加失败')\r\n              }\r\n            })\r\n            }\r\n          }else{\r\n            // 修改管理员\r\n            updateAdmin(this.ruleForm).then(res => {\r\n              if(res.data.code === 1){\r\n                this.$message.success('修改成功')\r\n                this.$router.push('/admin')\r\n              }else{\r\n                this.$message.error('修改失败')\r\n              }\r\n            })\r\n          }\r\n        })\r\n      }\r\n    },\r\n}\r\n"],"sourceRoot":""}]}